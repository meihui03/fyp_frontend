{% extends 'main.html' %}
{% load static %}
{% block content %}

<div class="upload-container">
    {% if user.is_authenticated and user.is_superuser %}
        <h2>Insert Image for Testing</h2> 
    {% else %}
        <h2>Face Recognition System</h2>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Default image shown -->
        <img id="preview" src="{% static 'users/images/image.png' %}" alt="Preview" />

        <div class="upload-input">
            <input 
                type="file" 
                id="fileInput" 
                name="image" 
                accept="image/*" 
                onchange="previewImage(event)" 
                required 
                style="display: none;"
            />

            <button type="button" onclick="document.getElementById('fileInput').click()">
                Upload Image
            </button>
            <button type="submit">
                Proceed
            </button>
        </div>

    </form>
</div>

<script>
function previewImage(event) {
    const image = document.getElementById('preview');
    image.src = URL.createObjectURL(event.target.files[0]);
    image.style.display = 'block';
}
</script>

{% endblock %}