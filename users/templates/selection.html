{% extends 'main.html' %} {% load static %} {% block content %}

<div class="container">

    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search by Id..." />
      <i class="fas fa-search"></i>
    </div>
  
    <div class="table-container">
      <table class="custom-table" id="userTable">
        <thead>
          <tr>
            <th>No</th>
            <th>Id</th>
            <th>Images</th>
            <th>Protected?</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ user.id }}</td>
              <td>
                <img src="{{ user.image }}" alt="{{ user.id }}" style="max-width: 80px; max-height: 80px;"/>
              </td>
              <td><input type="checkbox" /></td>
            </tr>
          {% endfor %}
        </tbody>
        {% comment %} <tbody>
          <tr>
            <td>1</td>
            <td>user001</td>
            <td><img src="{% static 'users/images/image.png' %}" alt="User 1"/></td>
            <td><input type="checkbox" /></td>
          </tr>
          <tr>
            <td>2</td>
            <td>user002</td>
            <td><img src="{% static 'users/images/image.png' %}" alt="User 2"/></td>
            <td><input type="checkbox" /></td>
          </tr>
        </tbody> {% endcomment %}
      </table>

      <div class="button-container">
        <a href="{% url 'uploadimage' %}">
            <button class="proceed-btn" type="button">
                Proceed
            </button>
        </a>
    </div>
    

    </div>
  </div>

<script>
document.getElementById('searchInput').addEventListener('keyup', function() {
    var filter = this.value.toUpperCase();
    var table = document.getElementById('userTable');
    var trs = table.getElementsByTagName('tr');

    // Start from 1 to skip the header row
    for (var i = 1; i < trs.length; i++) {
        var td = trs[i].getElementsByTagName('td')[1]; // User ID is in the 2nd column
        if (td) {
            var txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                trs[i].style.display = '';
            } else {
                trs[i].style.display = 'none';
            }
        }
    }
});
</script>

{% endblock %}